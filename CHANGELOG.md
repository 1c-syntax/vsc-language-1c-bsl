# Changelog

## 1.16.0

### Изменения и добавления

* Обновлен BSL Language Server до версии [0.9.1](https://github.com/1c-syntax/bsl-language-server/releases/tag/v0.9.0):
  * Добавлены "быстрые исправления" для диагностик, в том числе "Fix all" - исправление всех диагностик указанного типа в текущем файле
  * В символы документа теперь выводятся и области
  * Добавлены новые диагностики, улучшена работа имеющихся диагностик
  * Исправлены обнаруженные ошибки

## 1.15.0

### Изменения и добавления

* Обновлен BSL Language Server до версии [0.8.0](https://github.com/1c-syntax/bsl-language-server/releases/tag/v0.8.0):
  * добавлен обработчик `textDocument/documentSymbol` - вывод символов документа - процедур, функций и переменных, объявленных через `Перем`.
  * добавлены диагностики
  * убран вывод в лог сообщений об ошибках парсинга файлов
  * исправлены обнаруженные ошибки
* Расширение теперь пакуется в бандл с помощью webpack - снижено время открытия и активации расширения

## 1.14.0

### Изменения и добавления

* Обновлен BSL Language Server:
  * добавлен обработчик `textDocument/foldingRange` - расчет сворачиваемых областей. Доступно сворачивание многострочных комментариев, инструкций препроцессору `#Если ... #КонецЕсли`, `#Область ... #КонецОбласти`, процедур и функций, блочных конструкций `Если`/`Пока` и т.п.

### Исправления

* Исправлена ошибка дублирования комментария в начале файла при выполнении форматирования документа
* Добавлена обработка пробелов и абсолютных путей в настройках запуска BSL Language Server и java

## 1.13.0

Расширение начинает медленно переезжать на [BSL Language Server](https://1c-syntax.github.io/bsl-language-server/).

> Внимание!
> Для работы BSL Language Server требуется установленная Java SE версии 8 или новее!

### Изменения и добавления

* Добавлено подключение BSL Language Server версии 0.6.1
* Добавлен вывод диагностик об ошибках, отлавливаемых BSL Language Server
* Форматирование документа и блока кода переведено на BSL Language Server по умолчанию
* Добавлены настройки, позволяющие задавать:
  * пути к исполняемым файлам java и BSL LS
  * возможность включения "старого" механизма форматирования

## 1.12.0

### Изменения и добавления

* Добавлен Синтакс-Помощник OneScript.Web
* В систему автодополнения, подсказки параметров и всплывающей подсказки добавлена обработка метода ПриСозданииОбъекта у классов OneScript
* Добавлена подсказка по сигнатурам стандартных классов 1C и OneScript (в конструкторе и при вызове методов). Методы показываются при условии, что переменная класса названа так же, как и класс
* Модули и классы OneScript из рабочего каталога теперь добавляются в систему автодополнения, если структура каталогов удовлетворяет "Соглашению о структуре каталогов библиотек OneScript"
* Добавлена обработка перехода к определению процедуры (F12) на конструкторе класса OneScript
* Синтакс-Помощник OneScript обновлен до 1.0.21
* Синтакс-Помощник 1С обновлен до 8.3.13
* Исправления найденных ошибок

## 1.11.1

* Добавлена подсветка аннотаций для OneScript

## 1.11.0

### Изменения и добавления

* Добавлена команда генерации описания ко всем экспортным процедурам/функциям текущего файла
* Добавлен показ текущего метода на нижней панели
* Синтакс-помощник OneScript обновлен до версии 1.0.19
* Обновлены все зависимости
* Очень плодотворный рефакторинг (огромное спасибо @bambr1975)

## 1.10.1

### Изменения и добавления

* Сниппеты описаний процедур/функций больше не добавляют имя процедуры в комментарий после конца метода
* Частичная поддержка работы в нескольких рабочих пространствах

### Исправления

* Генерация описания метода корректно заполняет имена параметров
* Задачи сборки и проверки не подсвечивали ошибки в файле
* Исправлены падения заполнения кэша библиотека в случае, если библиотека содержит несколько файлов `lib.config`
* Починена команда переключения контекстов в Синтакс-помощнике

## 1.10.0

### Изменения и добавления

* Требуемая версия VSCode повышена до 1.17.0
* Добавлено управление сворачиванием областей по маркерам `#Область ... #КонецОбласти` и `//{ ... //}`
* Обновлен синтакс-помощник 1С:Предприятие и OneScript
* Удалена команда `Create tasks.json for current workspace`. Вместо нее используется TasksApi VSCode 1.17
* На базе TasksApi реализованы стандартные команды работы со скриптами. Добавлено автоопределение задач opm, а так же стандартные команды запуска тестирования с помощью фреймворков `1bdd` и `1testrunner`.
* Добавлена настройка `language-1c-bsl.autoDetect`, отвечающая за автоопределение задач для opm. По умолчанию включено
* Добавлена команда `Выровнять блок пробелами`
* Добавлена команда `QuickOpen` для быстрого поиска перехода к модулям объектов/менеджеров/команд/общих и т.д.
* Переработано представление информации о типах значений параметров в автодополнении и при наведении на метод
* В автодополнение и информацию при наведении на метод добавлено указание наличия `Знач` у параметра метода и значение по умолчанию
* Автоформатирование выделенного блока теперь приводит ключевые слова к каноническому написанию
* Deep refactoring всего, до чего добрались руки

### Синтакс-помощник

* Значительно был переработан синтакс-помощник и механизм его рендера
* Добавлена информация по экспортным методам библиотек OneScript, написанных на OneScript
* Добавлена возможность импорта информации об экспортных методах библиотек OneScript, написанных на C#
* Для библиотек OneScript добавлен показ README.md с github-репозитория библиотеки
* Добавлен вывод информации об экспортных методах 1С конфигурации. Имеется группировка по метаданным и по подсистемам
* Добавлены системные перечисления перечисления 1С
* В режиме редактирования файлов OneScript добавлена информация об уникальных для OneScript значениях перечислений (например, `КодировкаТекста.UTF8NoBOM`)

### Исправления

* Исправлена ошибка редактирования документа, пока еще не загружен плагин, которая могла привести к остановке работы плагина
* Исправлена ошибка анализа установленных библиотек OneScript, приводяющая к остановке работы системы автодополнения

## 1.9.3

* Автокомплит по библиотекам oscript теперь работает в режиме открытия отдельного файла

## 1.9.2

* Формат отступов (табуляция, 4 символа) теперь устанавливается штатными средствами VSCode 1.10+
* Вставка символов `//` при редактировании комментария переведена на `shift+enter` как и планировалось изначально
* Скорректирована процедура открытия синтакс-помощника
* Исправлена принудительная вставка символа табуляции при разворачивании конструкций вида `a++` - теперь учитываются настройки редактора 
* Исправлена подсветка сравнений в условиях при использовании переносов строки

## 1.9.1

* Исправление ошибки обновления на 1.9.0

## 1.9.0

* В работу системы автодополнения добавлены библиотеки OneScript. Работают:
    * Переход к определению 
    * Информация о процедуре 
    * Предварительный просмотр определения процедуры 
    * Автодополнение через точку 
    * Подсказка по параметрам процедур 
* Имеющиеся ограничения:
    * Требуется установка пакета oscript-config из opm
    * В библиотеке OneScript должен присутствовать файл lib.config
    * Для работы автодополнения классов имя переменной должно совпадать с именем класса

## 1.8.8

* Исправлена ошибка редкого открытия неверного файла при совершении перехода к определению на процедуры с совпадающими названиями

## 1.8.7

* Исправлена неверная подсветка отдельно стоящего ключевого слова `СОЕДИНЕНИЕ` в запросе
* Поправлена работа подсветки в конструкции `ЕСТЬ НЕ NULL` в запросе
* В шаблоне задач для запуска OneScript расширена обработка вложенных сообщений об ошибках
* Автодополнение по стандартным перечислениям теперь работает не только после знака `=`
* Добавлено автодополнение по значениям стандартных перечислений

## 1.8.6

* В Синтакс-помощник OneScript добавлены пропущенные функции работы с типами
* Исправлено переключение контекстов в Синтакс-помощнике
* Исправлено открытие Синтакс-помощника по функциям, отличным от файловых операций

## 1.8.5

* Исправлена ошибка открытия Синтакс-помощника по функции под курсором

## 1.8.4

* Исправлена работа всплывающей подсказки после наведения на глобальные функции

## 1.8.3

* Исправлена редкая ошибка формирования комментариев к функциям

## 1.8.2

* Исправлена ошибка подсветки нескольких переменных через одно ключевое слово `Перем`
* Исправлена ошибка определения глобальных классов `AdRepresentation` и `ПанельЗадачОС`
* Перевод строки внутри `()` теперь добавляет отступ
* Автовставка закрывающей скобки теперь учитывает настройку `editor.autoClosingBrackets` и работает только в языке `1C (BSL)`

## 1.8.1

* Для языка запросов добавлены расширения файлов `sdbl` и `query`
* Исправлена ошибка определения запроса внутри `bsl` файла, если запрос написан в английском синтаксисе
* Исправлена подсветка операторов `ИТОГИ ПО`, `ДЛЯ ИЗМЕНЕНИЯ`, `ТОЛЬКО ИЕРАРХИЯ` в английском синтаксисе
* Обновлены зависимости пакетов

## 1.8.0

* Добавлены процедуры и перечисления, добавленные в 1С:Предприятие 8.3.9
* Добавлена поддержка аннотаций (`&Перед(...)` и прочих)
* Добавлена возможность подсветки круглых скобок в темах, которые это поддерживают. Использумые пространства имен: `punctuation.bracket.begin.bsl` и `punctuation.bracket.end.bsl`
* Добавлена возможность автовставки `//` после перевода строки при нажатии `shift+enter` в строке комментария
* Исправлена ошибка определения `ПОЛНОЕ ВНЕШНЕЕ СОЕДИНЕНИЕ` в запросе
* Доработано определение границы слов для чисел
* Определение GUID убрано из грамматики
* Исправлено отображение подсказки по параметрам процедур для VSC 1.6
* Исправлен переход по ссылкам Синтакс-помощника в VSC 1.6

## 1.7.2

* Исправлены падения из-за ошибок релиза 1.7.1

## 1.7.1

* Исправлен неработавший отступ назад при наборе закрывающих операторных скобок (`КонецЕсли` и прочие). Для работы требуется активировать настройку `"editor.formatOnType": true` в `settings.json`.
* Расширено описание Синтакс-Помощника для некоторых методов `OneScript`

## 1.7.0

* Добавлена возможность автоматически разворачивать конструкции вида `++`/`+=` и подобных по нажатию на `Tab`
* Добавлено автоформатирование текста по `Shift-Alt-F`
* Исправлено отображение секции `Примеры` в синтакс-помощнике

## 1.6.2

* Исправлена некорректная работа всплывающей подсказки в VSC 1.3.0

## 1.6.1

* Исправлен показ параметров в синтаксис-помощнике

## 1.6.0

* Добавлен синтаксис-помощник по методам OneScript
* Добавлена структура классов и процедур для OneScript (полностью) и 1С (частично)
* Добавлены автодополнение, подсказа при наведении, поддержка подсказки параметров при вводе для процедур и функций OneScript
* Добавлено автодополнение классами после оператора `Новый`

## 1.5.5

* Добавлена команда быстрого создания файла `tasks.json`
* Исправлено зависание обновления кэша при редактировании файлов со смешанным режимом переносов строк
* В варианты запуска скриптов oscript добавлен режим `-check`

## 1.5.4

* Иcправлена работа автодополнения, перехода к определению в новосозданных несохраненных файлах

## 1.5.3

* Добавлена поддержка новых классов 8.3.8. Обновлена справка по методам.
* Добавлено определение и подсветка присваивания переменных
* Исправлена некорректная обработка абсолютного пути к точке входа в окружение `oscript` в настройке `linterEntryPoint`

## 1.5.2

* Добавлена возможность оборачивать выделенный текст в конструкции вида `Если Тогда ... КонецЕсли;` с помощью динамических шаблонов
* Исправлено ошибочное попадание ключевого слова Процедура/Функция как первого параметра, если определение процедуры/функции занимает несколько строк
* Исправлено отображение Синтаксис-помощника на светлой теме
* Исправлено ошибочное определение операторов языка (например, `ССЫЛКА`) после ключевого слова `КАК`

## 1.5.1

* При автодополнении курсор позиционируется после скобок, если у процедуры нет параметров

## 1.5.0

Новая система автодополнения для конфигураций, разложенных на исходные файлы, и скриптов `.os`
Полное описание новых возможностей смотрите [здесь](https://github.com/xDrivenDevelopment/vsc-language-1c-bsl/wiki/%D0%9E%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9-%D1%80%D0%B5%D0%BB%D0%B8%D0%B7%D0%B0-1.5.0).
* Переход к определению
* Поиск мест использования процедур
* Информация о процедуре
* Предварительный просмотр определения процедуры
* Автодополнение через точку
* Подсказка по параметрам процедур
* Поиск определения
* Поддержка английского языка конфигурации
* Создание описания метода
* Синтаксис-помощник по функциям глобального контекста
* Добавлены настройки для работы с OneScriptLint и системой автодополнения
* Автоматическая вставка скобок


* Исправлено сохранение новых файлов в грамматике `1C (Query)`

## 1.4.8

* Исправлена установка отступов по умолчанию для VS Code >1.0.0

## 1.4.7

* Исправлены неработавшие сниппеты `#Область` и `#Region`
* Исправлена подсветка классов и свойств глобального контекста, имеющих символ точки после вызова

## 1.4.6

* Исправлено ошибочное срабатывание подсветки запроса внутри модуля на текст вида `selected` вместо `select`

## 1.4.5

* Исправлено определение начала и конца ключевых слов и функций

## 1.4.4

* Добавлена поддержка разделителей в литералах типа "Дата"

## 1.4.3

* Исправлена регистрозависимость конструкции `#Использовать`

## 1.4.1

* Исправлено определение даты в одинарных кавычках
* Исправлено определение двух двойных кавычек внутри строки в тексте запроса. Теперь они корректно определяются как `constant.character.escape` и выделяются цветом

## 1.4.0

* Добавлены сниппеты (шаблоны текста). За основу взяты стандартные шаблоны текста конфигуратора
* Добавлено определение переменных, объявленных через `Перем`, как `variable`.
* Добавлена подсветка парных скобок при выделении
* Исправлено определение двух двойных кавычек внутри строки. Теперь они корректно определяются как `constant.character.escape` и выделяются цветом
* Исправлено определение закомментированной строки текста запроса

## 1.3.1

* Исправлено определение указателей на процедуры и функции, когда в файле используются LF-переносы строк (случайный пропуск релиза 1.2.3)

## 1.3.0

* Добавлена возможность проверки синтаксиса файлов `*.os` и `*.bsl` (опционально), используя интерпретатор `OneScript`

## 1.2.3

* Исправлено определение указателей на процедуры и функции, когда в файле используются LF-переносы строк

## 1.2.2

* Исправлена ошибка определения комментариев внутри текста запроса в тексте модуля, приводившая к комментированию текста за пределами запроса
* Исправлено ошибочное определение ключевых слов внутри строк в тексте запроса
* Исправлено прерывание работы подсветки текста запроса при использовании двойных кавычек в тексте запроса

## 1.2.1

* Добавлена подсветка текста запроса внутри текста модуля

## 1.2.0

* Добавлена подсветка синтаксиса языка запросов. Доступна по имени `1C (Query)` в списке языков
* Исправлено определение `#КонецОбласти`, которое могло приводить присвоению цвета, отличного от `#Область`

## 1.1.6

* Добавлена подсветка #Область/#КонецОбласти

## 1.1.5

* Добавлено автодополнение по процедурам и функциям глобального контекста
* Добавлены автоматические вставка и удаление отступов при использовании блочных конструкций (например, `Если ... Тогда`)
* Добавлена настройка отступов по умолчанию - используются жесткие табы размером в 4 символа

## 1.1.4

* Исправлено зависание при переносе строки в многострочных строках
* Исправлено удаление отступов при переносе строки
* Исправлено задвоение процедур при просмотре списка процедур и функций текущего файла
* Скорректировано определение дат, как цифр в одинарных кавычках

## 1.1.3

* Добавлена возможность перехода к определению функции
* Добавлена возможность просмотра списка процедур и функций текущего файла

## 1.1.2

* Исправлена ошибка вставки символа `|` при сработавшем автодополнении

## 1.1.1

* Исправлено определение комментария внутри строкового литерала

## 1.1.0

* Добавлена возможность запуска файлов `.bsl`/`.os` через интерпретатор [OneScript](http://oscript.io/)
* Добавлена автоматическая вставка символа `|` при переводе строки во время редактирования строкового литерала
* Исправлена подсветка комментария в последней строке файла

## 1.0.7

* Добавлено определение всех процедур, функций и свойств, относящихся к глобальному контексту
* Исправлена подсветка одиночного `Для`

## 1.0.6

* Добавлена возможность блочного комментирования через `//`
* Исправлена ошибка подсветки, если сразу после определения функции идет запятая

## 1.0.5

* Корректная обработка буквы `ё`
* Добавлены функции по работе со строками, появившиеся в 8.3.6
* Исправлена подсветка составных директив компиляции (например, `&НаСервереБезКонтекста`)
* Исправлена ошибка зацикливания при определении значений по-умолчанию в заголовках процедур и функций

## 1.0.4

* Добавлены проверки на наличие пробелов в определения процедур/функций и `Перем`
* Технические изменения для поддержки различными парсерами

## 1.0.3

* Добавлено определение функции "Новый"
* `Перем` теперь определяется как `storage.type.var`
* Исправлено определение ключевого слова `Экспорт` при объявлении переменной
* Исправлено ложное включение открывающей скобки в `support.function`

## 1.0.2

* Исправлено определение экранированных кавычек в строке
* Добавлены английские синонимы ключевых слов

## 1.0.1

* Добавлено определение инструкций препроцессору (#Если ... Тогда)

## 1.0.0 - Первый релиз
